<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographic: Calculating a Spectrometer's Optimal Slit Width</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .latex-frac {
            display: inline-flex;
            flex-direction: column;
            text-align: center;
            vertical-align: middle;
            margin: 0 0.2em;
        }
        .latex-num {
            border-bottom: 1px solid currentColor;
            padding: 0 0.2em;
        }
        .latex-den {
            padding: 0 0.2em;
        }
        .card-header {
            font-size: 1.25rem;
            font-weight: 700;
            color: #003F5C;
            border-bottom: 2px solid #00A1E4;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        .equation-box {
            background-color: #F2F2F2;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            border-left: 5px solid #0084B4;
            font-family: monospace;
            font-size: 1.1rem;
            color: #003F5C;
            overflow-x: auto;
            white-space: nowrap;
        }
        .param-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0.5rem 1rem;
            align-items: center;
        }
    </style>
</head>
<body class="bg-[#F2F2F2]">
    
    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-black text-[#003F5C] mb-2">The Perfect Slit: Designing a Spectrometer's Entrance</h1>
            <p class="text-lg md:text-xl text-[#005A7E] max-w-3xl mx-auto">An interactive guide to deriving the optimal slit width, balancing light throughput with spectral resolution.</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-8">
            
            <div class="bg-white rounded-lg shadow-md p-6 md:col-span-2">
                <h2 class="card-header">The Fundamental Trade-Off</h2>
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <p class="text-[#005A7E] text-base flex-1">
                        A spectrometer's entrance slit is a critical gatekeeper. A wider slit allows more light in (high throughput), which is great for detecting faint signals. However, it blurs the resulting spectrum, worsening the ability to distinguish between closely spaced wavelengths (low resolution). Conversely, a narrow slit provides sharp, detailed spectra (high resolution) but might starve the detector of light. The optimal design finds the perfect balance by matching the slit's image on the detector to the physical size of its pixels. This infographic walks through the derivation of that perfect width.
                    </p>
                    <div class="flex-1 w-full p-4 bg-gray-50 rounded-lg">
                        <div class="flex justify-between items-center text-center font-bold text-sm text-[#003F5C]">
                            <div>
                                <span class="text-4xl">💡</span>
                                <p>High Throughput</p>
                                <p class="font-normal text-xs">(Wide Slit)</p>
                            </div>
                            <div class="flex-1 h-1 bg-gradient-to-r from-[#00A1E4] to-[#0084B4] mx-4 rounded-full"></div>
                            <div>
                                <span class="text-4xl">🔬</span>
                                <p>High Resolution</p>
                                <p class="font-normal text-xs">(Narrow Slit)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="card-header">Step 1: The Goal - Spectral Resolution (Δλ)</h2>
                <p class="text-[#005A7E] mb-4">
                    Our primary design goal is the spectral resolution (Δλ), the smallest difference in wavelength the spectrometer can reliably distinguish. To register this separation, the light from two wavelengths, λ and λ+Δλ, must land on different pixels on our detector. The "Two Pixel Rule" is a common design standard: the image of Δλ should be separated by at least two pixels for a clear distinction.
                </p>
                <div class="p-4 bg-gray-50 rounded-lg text-center">
                     <p class="text-sm text-[#005A7E]">Minimum Resolvable Image on Detector (Δd):</p>
                     <p class="text-2xl font-bold text-[#003F5C] mt-1">Δd = 2 × (Pixel Size)</p>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                 <h2 class="card-header">Step 2: Linear Dispersion</h2>
                <p class="text-[#005A7E] mb-4">
                    Linear dispersion describes how the optical system spreads different wavelengths across the detector plane. It connects the desired spectral resolution (Δλ, in nanometers) to the required physical separation (Δd, in millimeters) on the detector via the imaging lens focal length (L<sub>F</sub>) and grating properties.
                </p>
                <div class="equation-box">
                    Δd = Δλ · 
                    <div class="latex-frac">
                        <span class="latex-num">m · L<sub>F</sub></span>
                        <span class="latex-den">d · cos(β)</span>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="card-header">Step 3: Imaging the Slit</h2>
                <p class="text-[#005A7E] mb-4">
                    In an infinity-corrected setup, the system images the entrance slit (width 'w') onto the detector. The size of this image is determined by the ratio of the imaging lens (L<sub>F</sub>) and collimating lens (L<sub>C</sub>) focal lengths. To optimize performance, we set the slit's image size equal to the minimum resolvable dimension, Δd.
                </p>
                 <div class="equation-box">
                    Δd = w ·
                    <div class="latex-frac">
                        <span class="latex-num">L<sub>F</sub></span>
                        <span class="latex-den">L<sub>C</sub></span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="card-header">Step 4: The Final Equation</h2>
                <p class="text-[#005A7E] mb-4">
                    By setting the equations for Δd from Step 2 and Step 3 equal to each other, we can solve for the optimal slit width 'w'. Notice that the imaging focal length, L<sub>F</sub>, conveniently cancels out, simplifying the final design equation.
                </p>
                <div class="equation-box text-center text-lg">
                     w = 
                    <div class="latex-frac">
                        <span class="latex-num">m · Δλ · L<sub>C</sub></span>
                        <span class="latex-den">d · cos(β)</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6 md:col-span-2">
                <h2 class="card-header">Interactive Calculator</h2>
                <p class="text-[#005A7E] mb-6">Use the final derived equation to calculate the optimal slit width for your own design. Adjust the parameters below to see how they impact the result.</p>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div id="calculator-form" class="space-y-4">
                        <div class="param-grid">
                            <label for="delta-lambda" class="font-semibold text-[#003F5C]">Resolution (Δλ)</label>
                            <div class="flex items-center">
                                <input type="number" id="delta-lambda" value="1" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00A1E4] focus:border-transparent">
                                <span class="ml-2 text-gray-500">nm</span>
                            </div>
                        </div>
                        <div class="param-grid">
                            <label for="lc" class="font-semibold text-[#003F5C]">Collimating L<sub>C</sub></label>
                             <div class="flex items-center">
                                <input type="number" id="lc" value="75" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00A1E4] focus:border-transparent">
                                <span class="ml-2 text-gray-500">mm</span>
                            </div>
                        </div>
                        <div class="param-grid">
                            <label for="grooves" class="font-semibold text-[#003F5C]">Grating Grooves</label>
                             <div class="flex items-center">
                                <input type="number" id="grooves" value="600" step="50" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00A1E4] focus:border-transparent">
                                <span class="ml-2 text-gray-500">/mm</span>
                            </div>
                        </div>
                        <div class="param-grid">
                            <label for="beta" class="font-semibold text-[#003F5C]">Diffraction Angle (β)</label>
                             <div class="flex items-center">
                                <input type="number" id="beta" value="19.5" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00A1E4] focus:border-transparent">
                                <span class="ml-2 text-gray-500">deg</span>
                            </div>
                        </div>
                         <div class="param-grid">
                            <label for="order" class="font-semibold text-[#003F5C]">Diffraction Order (m)</label>
                             <div class="flex items-center">
                                <input type="number" id="order" value="1" min="1" step="1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00A1E4] focus:border-transparent">
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col items-center justify-center bg-[#003F5C] rounded-lg p-8 text-white">
                        <p class="text-xl text-[#F2F2F2] mb-2">Optimal Slit Width (w)</p>
                        <p id="result" class="text-5xl font-black text-white">26.5 µm</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow-md p-6 md:col-span-2">
                <h2 class="card-header">Parameter Sensitivity Analysis</h2>
                <p class="text-[#005A7E] mb-4">How does changing a single parameter affect the required slit width? This chart shows the percentage change in the optimal slit width 'w' when one input is increased by 20%, keeping all others at their default values (Δλ=1nm, L<sub>C</sub>=75mm, 600 gr/mm, β=19.5°). A taller bar indicates a greater impact.</p>
                <div class="chart-container">
                    <canvas id="sensitivityChart"></canvas>
                </div>
            </div>

        </main>
    </div>

    <script>
        const calculatorForm = document.getElementById('calculator-form');
        const resultEl = document.getElementById('result');

        const inputs = {
            deltaLambda: document.getElementById('delta-lambda'),
            lc: document.getElementById('lc'),
            grooves: document.getElementById('grooves'),
            beta: document.getElementById('beta'),
            order: document.getElementById('order')
        };

        function calculateSlitWidth() {
            const m = parseFloat(inputs.order.value) || 1;
            const deltaLambda = parseFloat(inputs.deltaLambda.value) || 0;
            const Lc = parseFloat(inputs.lc.value) || 0;
            const groovesPerMm = parseFloat(inputs.grooves.value) || 1;
            const betaDegrees = parseFloat(inputs.beta.value) || 0;

            if (groovesPerMm === 0) {
                resultEl.textContent = 'Error';
                return;
            }

            const d_nm = (1 / groovesPerMm) * 1e6;
            const betaRadians = betaDegrees * (Math.PI / 180);
            const cosBeta = Math.cos(betaRadians);

            if (cosBeta === 0) {
                resultEl.textContent = 'Error';
                return;
            }

            const w_mm = (m * deltaLambda * Lc) / (d_nm * cosBeta);
            const w_um = w_mm * 1000;

            resultEl.textContent = `${w_um.toFixed(1)} µm`;
        }
        
        calculatorForm.addEventListener('input', calculateSlitWidth);
        calculateSlitWidth();

        function wrapLabel(str, maxWidth) {
            if (str.length <= maxWidth) {
                return str;
            }
            const words = str.split(' ');
            let lines = [];
            let currentLine = '';
            for (let i = 0; i < words.length; i++) {
                const word = words[i];
                const testLine = currentLine + (currentLine.length > 0 ? ' ' : '') + word;
                if (testLine.length > maxWidth) {
                    lines.push(currentLine);
                    currentLine = word;
                } else {
                    currentLine = testLine;
                }
            }
            lines.push(currentLine);
            return lines;
        }

        const ctx = document.getElementById('sensitivityChart').getContext('2d');
        const sensitivityChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [
                    wrapLabel('Resolution (Δλ)', 16), 
                    wrapLabel('Collimating Lens (LC)', 16), 
                    wrapLabel('Grating Grooves /mm', 16), 
                    wrapLabel('Diffraction Angle (β)', 16)
                ],
                datasets: [{
                    label: '% Change in Slit Width for +20% Parameter Change',
                    data: [20, 20, -16.7, 7.3],
                    backgroundColor: [
                        '#00A1E4',
                        '#0084B4',
                        '#005A7E',
                        '#003F5C'
                    ],
                    borderColor: '#FFFFFF',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: '% Change in Slit Width (w)',
                            color: '#005A7E'
                        },
                        ticks: {
                           color: '#005A7E'
                        }
                    },
                    y: {
                       ticks: {
                           color: '#005A7E'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                let label = item.chart.data.labels[item.dataIndex];
                                if (Array.isArray(label)) {
                                  return label.join(' ');
                                } else {
                                  return label;
                                }
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
